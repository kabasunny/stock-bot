// Code generated by goa v3.23.1, DO NOT EDIT.
//
// order HTTP server types
//
// Command:
// $ goa gen stock-bot/design

package server

import (
	order "stock-bot/gen/order"

	goa "goa.design/goa/v3/pkg"
)

// CreateRequestBody is the type of the "order" service "create" endpoint HTTP
// request body.
type CreateRequestBody struct {
	// 銘柄コード (例: 7203)
	Symbol *string `form:"symbol,omitempty" json:"symbol,omitempty" xml:"symbol,omitempty"`
	// 売買区分 (BUY/SELL)
	TradeType *string `form:"trade_type,omitempty" json:"trade_type,omitempty" xml:"trade_type,omitempty"`
	// 注文種別 (MARKET/LIMITなど)
	OrderType *string `form:"order_type,omitempty" json:"order_type,omitempty" xml:"order_type,omitempty"`
	// 発注数量
	Quantity *uint64 `form:"quantity,omitempty" json:"quantity,omitempty" xml:"quantity,omitempty"`
	// 発注価格 (LIMIT注文の場合)
	Price *float64 `form:"price,omitempty" json:"price,omitempty" xml:"price,omitempty"`
	// ポジションの口座区分 (CASH/MARGIN_NEW/MARGIN_REPAY)
	PositionAccountType *string `form:"position_account_type,omitempty" json:"position_account_type,omitempty" xml:"position_account_type,omitempty"`
}

// CreateResponseBody is the type of the "order" service "create" endpoint HTTP
// response body.
type CreateResponseBody struct {
	// 受付済み注文ID
	OrderID string `form:"order_id" json:"order_id" xml:"order_id"`
}

// NewCreateResponseBody builds the HTTP response body from the result of the
// "create" endpoint of the "order" service.
func NewCreateResponseBody(res *order.CreateResult) *CreateResponseBody {
	body := &CreateResponseBody{
		OrderID: res.OrderID,
	}
	return body
}

// NewCreatePayload builds a order service create endpoint payload.
func NewCreatePayload(body *CreateRequestBody) *order.CreatePayload {
	v := &order.CreatePayload{
		Symbol:    *body.Symbol,
		TradeType: *body.TradeType,
		OrderType: *body.OrderType,
		Quantity:  *body.Quantity,
	}
	if body.Price != nil {
		v.Price = *body.Price
	}
	if body.PositionAccountType != nil {
		v.PositionAccountType = *body.PositionAccountType
	}
	if body.Price == nil {
		v.Price = 0
	}
	if body.PositionAccountType == nil {
		v.PositionAccountType = "CASH"
	}

	return v
}

// ValidateCreateRequestBody runs the validations defined on CreateRequestBody
func ValidateCreateRequestBody(body *CreateRequestBody) (err error) {
	if body.Symbol == nil {
		err = goa.MergeErrors(err, goa.MissingFieldError("symbol", "body"))
	}
	if body.TradeType == nil {
		err = goa.MergeErrors(err, goa.MissingFieldError("trade_type", "body"))
	}
	if body.OrderType == nil {
		err = goa.MergeErrors(err, goa.MissingFieldError("order_type", "body"))
	}
	if body.Quantity == nil {
		err = goa.MergeErrors(err, goa.MissingFieldError("quantity", "body"))
	}
	if body.TradeType != nil {
		if !(*body.TradeType == "BUY" || *body.TradeType == "SELL") {
			err = goa.MergeErrors(err, goa.InvalidEnumValueError("body.trade_type", *body.TradeType, []any{"BUY", "SELL"}))
		}
	}
	if body.OrderType != nil {
		if !(*body.OrderType == "MARKET" || *body.OrderType == "LIMIT" || *body.OrderType == "STOP" || *body.OrderType == "STOP_LIMIT") {
			err = goa.MergeErrors(err, goa.InvalidEnumValueError("body.order_type", *body.OrderType, []any{"MARKET", "LIMIT", "STOP", "STOP_LIMIT"}))
		}
	}
	if body.PositionAccountType != nil {
		if !(*body.PositionAccountType == "CASH" || *body.PositionAccountType == "MARGIN_NEW" || *body.PositionAccountType == "MARGIN_REPAY") {
			err = goa.MergeErrors(err, goa.InvalidEnumValueError("body.position_account_type", *body.PositionAccountType, []any{"CASH", "MARGIN_NEW", "MARGIN_REPAY"}))
		}
	}
	return
}
