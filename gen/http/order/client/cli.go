// Code generated by goa v3.23.1, DO NOT EDIT.
//
// order HTTP client CLI support package
//
// Command:
// $ goa gen stock-bot/design

package client

import (
	"encoding/json"
	"fmt"
	order "stock-bot/gen/order"

	goa "goa.design/goa/v3/pkg"
)

// BuildCreatePayload builds the payload for the order create endpoint from CLI
// flags.
func BuildCreatePayload(orderCreateBody string) (*order.CreatePayload, error) {
	var err error
	var body CreateRequestBody
	{
		err = json.Unmarshal([]byte(orderCreateBody), &body)
		if err != nil {
			return nil, fmt.Errorf("invalid JSON for body, \nerror: %s, \nexample of valid JSON:\n%s", err, "'{\n      \"is_margin\": true,\n      \"order_type\": \"STOP\",\n      \"price\": 0.4518777138956951,\n      \"quantity\": 15444783396623686298,\n      \"symbol\": \"A ut.\",\n      \"trade_type\": \"BUY\"\n   }'")
		}
		if !(body.TradeType == "BUY" || body.TradeType == "SELL") {
			err = goa.MergeErrors(err, goa.InvalidEnumValueError("body.trade_type", body.TradeType, []any{"BUY", "SELL"}))
		}
		if !(body.OrderType == "MARKET" || body.OrderType == "LIMIT" || body.OrderType == "STOP" || body.OrderType == "STOP_LIMIT") {
			err = goa.MergeErrors(err, goa.InvalidEnumValueError("body.order_type", body.OrderType, []any{"MARKET", "LIMIT", "STOP", "STOP_LIMIT"}))
		}
		if err != nil {
			return nil, err
		}
	}
	v := &order.CreatePayload{
		Symbol:    body.Symbol,
		TradeType: body.TradeType,
		OrderType: body.OrderType,
		Quantity:  body.Quantity,
		Price:     body.Price,
		IsMargin:  body.IsMargin,
	}
	{
		var zero float64
		if v.Price == zero {
			v.Price = 0
		}
	}
	{
		var zero bool
		if v.IsMargin == zero {
			v.IsMargin = false
		}
	}

	return v, nil
}
