swagger: "2.0"
info:
    title: 株式取引ボット API
    description: 株式取引ボットの機能を提供するAPI
    version: 0.0.1
host: localhost:8080
consumes:
    - application/json
    - application/xml
    - application/gob
produces:
    - application/json
    - application/xml
    - application/gob
paths:
    /balance/can_entry/{issue_code}:
        get:
            tags:
                - balance
            summary: canEntry balance
            description: 指定した銘柄にエントリー可能か判断します。
            operationId: balance#canEntry
            parameters:
                - name: issue_code
                  in: path
                  description: 銘柄コード
                  required: true
                  type: string
            responses:
                "200":
                    description: OK response.
                    schema:
                        $ref: '#/definitions/StockBalanceCanEntry'
            schemes:
                - http
    /balance/summary:
        get:
            tags:
                - balance
            summary: summary balance
            description: 口座の残高サマリーを取得します。
            operationId: balance#summary
            responses:
                "200":
                    description: OK response.
                    schema:
                        $ref: '#/definitions/StockBalanceSummary'
            schemes:
                - http
    /orders:
        post:
            tags:
                - order
            summary: newOrder order
            description: 新しい株式注文を作成します。
            operationId: order#newOrder
            parameters:
                - name: NewOrderRequestBody
                  in: body
                  required: true
                  schema:
                    $ref: '#/definitions/NewOrderPayload'
                    required:
                        - symbol
                        - trade_type
                        - order_type
                        - quantity
            responses:
                "201":
                    description: Created response.
                    schema:
                        $ref: '#/definitions/StockOrder'
            schemes:
                - http
definitions:
    NewOrderPayload:
        title: NewOrderPayload
        type: object
        properties:
            is_margin:
                type: boolean
                description: 信用取引かどうか
                default: false
                example: false
            order_type:
                type: string
                description: 注文種別
                example: LIMIT
                enum:
                    - MARKET
                    - LIMIT
                    - STOP
                    - STOP_LIMIT
            price:
                type: number
                description: 指値価格
                example: 3000.5
                format: double
            quantity:
                type: integer
                description: 注文数量
                example: 100
                format: int64
            symbol:
                type: string
                description: 銘柄コード
                example: "9432"
            time_in_force:
                type: string
                description: 注文の有効期間
                default: DAY
                example: DAY
                enum:
                    - DAY
            trade_type:
                type: string
                description: 取引種別
                example: BUY
                enum:
                    - BUY
                    - SELL
            trigger_price:
                type: number
                description: 逆指値トリガー価格
                example: 3100
                format: double
        example:
            is_margin: true
            order_type: LIMIT
            price: 3000.5
            quantity: 100
            symbol: "9432"
            time_in_force: DAY
            trade_type: BUY
            trigger_price: 3100
        required:
            - symbol
            - trade_type
            - order_type
            - quantity
    StockBalanceCanEntry:
        title: 'Mediatype identifier: application/vnd.stock.balance.can.entry; view=default'
        type: object
        properties:
            buying_power:
                type: number
                description: エントリー判断時点の買付余力
                example: 1.23456789e+06
                format: double
            can_entry:
                type: boolean
                description: エントリー可能かどうかのフラグ
                example: true
        description: CanEntryResponseBody result type (default view)
        example:
            buying_power: 1.23456789e+06
            can_entry: true
        required:
            - can_entry
            - buying_power
    StockBalanceSummary:
        title: 'Mediatype identifier: application/vnd.stock.balance.summary; view=default'
        type: object
        properties:
            cash_buying_power:
                type: number
                description: 現物買付可能額 (円)
                example: 1000000
                format: double
            margin_buying_power:
                type: number
                description: 信用新規建可能額 (円)
                example: 5000000
                format: double
            margin_rate:
                type: number
                description: 委託保証金率 (%)
                example: 60.5
                format: double
            total_assets:
                type: number
                description: 総資産 (円)
                example: 3.0000005e+06
                format: double
            updated_at:
                type: string
                description: 最終更新日時
                example: "2023-08-23T10:00:00Z"
                format: date-time
            withdrawal_possible_amount:
                type: number
                description: 出金可能額 (円)
                example: 500000
                format: double
        description: SummaryResponseBody result type (default view)
        example:
            cash_buying_power: 1000000
            margin_buying_power: 5000000
            margin_rate: 60.5
            total_assets: 3.0000005e+06
            updated_at: "2023-08-23T10:00:00Z"
            withdrawal_possible_amount: 500000
        required:
            - total_assets
            - cash_buying_power
            - margin_buying_power
            - withdrawal_possible_amount
            - margin_rate
            - updated_at
    StockOrder:
        title: 'Mediatype identifier: application/vnd.stock.order; view=default'
        type: object
        properties:
            created_at:
                type: string
                description: 作成タイムスタンプ
                example: "2013-03-18T20:19:42Z"
                format: date-time
            is_margin:
                type: boolean
                description: 信用取引かどうか
                example: true
            order_id:
                type: string
                description: 一意の注文ID
                example: 20230824-123456
            order_status:
                type: string
                description: 注文ステータス
                example: Excepturi architecto dolorum illum maiores.
            order_type:
                type: string
                description: 注文種別
                example: Qui at deserunt autem et recusandae sequi.
            price:
                type: number
                description: 指値価格
                example: 0.25396396236390706
                format: double
            quantity:
                type: integer
                description: 注文数量
                example: 8760874815210805206
                format: int64
            symbol:
                type: string
                description: 銘柄コード
                example: "9432"
            time_in_force:
                type: string
                description: 注文の有効期間
                example: Laudantium reiciendis minima aut voluptatem quidem.
            trade_type:
                type: string
                description: 取引種別
                example: Dolorum aut ullam consectetur.
            trigger_price:
                type: number
                description: 逆指値トリガー価格
                example: 0.740529396870943
                format: double
            updated_at:
                type: string
                description: 更新タイムスタンプ
                example: "1994-04-27T03:42:12Z"
                format: date-time
        description: NewOrderResponseBody result type (default view)
        example:
            created_at: "1999-02-04T18:19:54Z"
            is_margin: true
            order_id: 20230824-123456
            order_status: Aliquid iure non praesentium molestiae delectus.
            order_type: Molestiae provident enim et incidunt eum.
            price: 0.40990335988131127
            quantity: 1929409649213341634
            symbol: "9432"
            time_in_force: Itaque error.
            trade_type: Architecto qui.
            trigger_price: 0.5578293036117382
            updated_at: "1976-05-21T02:29:21Z"
        required:
            - order_id
            - symbol
            - trade_type
            - order_type
            - quantity
            - order_status
            - is_margin
            - created_at
            - updated_at
