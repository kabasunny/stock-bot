swagger: "2.0"
info:
    title: Stock Bot Service
    description: Service for placing and managing stock orders
    version: 0.0.1
host: localhost:8080
consumes:
    - application/json
    - application/xml
    - application/gob
produces:
    - application/json
    - application/xml
    - application/gob
paths:
    /balance:
        get:
            tags:
                - balance
            summary: get balance
            description: Get the account balance summary.
            operationId: balance#get
            responses:
                "200":
                    description: OK response.
                    schema:
                        $ref: '#/definitions/StockbotBalance'
            schemes:
                - http
    /master/stocks/{symbol}:
        get:
            tags:
                - master
            summary: get_stock master
            description: Get basic master data for a single stock.
            operationId: master#get_stock
            parameters:
                - name: symbol
                  in: path
                  description: Stock symbol to look up
                  required: true
                  type: string
            responses:
                "200":
                    description: OK response.
                    schema:
                        $ref: '#/definitions/StockbotStockMaster'
            schemes:
                - http
    /master/update:
        post:
            tags:
                - master
            summary: update master
            description: Trigger a manual update of the master data.
            operationId: master#update
            responses:
                "202":
                    description: Accepted response.
            schemes:
                - http
    /order:
        post:
            tags:
                - order
            summary: create order
            description: Create a new stock order.
            operationId: order#create
            parameters:
                - name: CreateRequestBody
                  in: body
                  required: true
                  schema:
                    $ref: '#/definitions/OrderCreateRequestBody'
                    required:
                        - symbol
                        - trade_type
                        - order_type
                        - quantity
            responses:
                "201":
                    description: Created response.
                    schema:
                        $ref: '#/definitions/OrderCreateResponseBody'
                        required:
                            - order_id
            schemes:
                - http
    /positions:
        get:
            tags:
                - position
            summary: list position
            description: List current positions.
            operationId: position#list
            parameters:
                - name: type
                  in: query
                  description: 取得するポジション種別 (all, cash, margin)
                  required: false
                  type: string
                  default: all
                  enum:
                    - all
                    - cash
                    - margin
            responses:
                "200":
                    description: OK response.
                    schema:
                        $ref: '#/definitions/StockbotPositionCollection'
            schemes:
                - http
    /price/{symbol}:
        get:
            tags:
                - price
            summary: get price
            description: Get the current price for a specified stock symbol.
            operationId: price#get
            parameters:
                - name: symbol
                  in: path
                  description: Stock symbol to look up
                  required: true
                  type: string
            responses:
                "200":
                    description: OK response.
                    schema:
                        $ref: '#/definitions/StockbotPrice'
            schemes:
                - http
    /price/{symbol}/history:
        get:
            tags:
                - price
            summary: get_history price
            description: Get historical price data for a specified stock symbol.
            operationId: price#get_history
            parameters:
                - name: days
                  in: query
                  description: Number of historical days to retrieve (optional)
                  required: false
                  type: integer
                  default: 0
                - name: symbol
                  in: path
                  description: Stock symbol to look up
                  required: true
                  type: string
            responses:
                "200":
                    description: OK response.
                    schema:
                        $ref: '#/definitions/StockbotHistoricalPrice'
            schemes:
                - http
definitions:
    HistoricalPriceItem:
        title: HistoricalPriceItem
        type: object
        properties:
            close:
                type: number
                description: 終値
                example: 0.7043942253663309
                format: double
            date:
                type: string
                description: 日付 (YYYY-MM-DD)
                example: Velit dolorem quia amet iusto dolore.
            high:
                type: number
                description: 高値
                example: 0.2184811800539491
                format: double
            low:
                type: number
                description: 安値
                example: 0.6664789344545423
                format: double
            open:
                type: number
                description: 始値
                example: 0.41439618993496463
                format: double
            volume:
                type: integer
                description: 出来高
                example: 3988510279444660381
                format: int64
        description: A single historical price data point.
        example:
            close: 0.34065565498291056
            date: Earum tempore quis est voluptate corrupti voluptatem.
            high: 0.5249749350641395
            low: 0.45425493855890337
            open: 0.0492178939577716
            volume: 8577540743020470976
        required:
            - date
            - open
            - high
            - low
            - close
    OrderCreateRequestBody:
        title: OrderCreateRequestBody
        type: object
        properties:
            order_type:
                type: string
                description: 注文種別 (MARKET/LIMITなど)
                example: MARKET
                enum:
                    - MARKET
                    - LIMIT
                    - STOP
                    - STOP_LIMIT
            position_account_type:
                type: string
                description: ポジションの口座区分 (CASH/MARGIN_NEW/MARGIN_REPAY)
                default: CASH
                example: MARGIN_REPAY
                enum:
                    - CASH
                    - MARGIN_NEW
                    - MARGIN_REPAY
            price:
                type: number
                description: 発注価格 (LIMIT注文の場合)
                default: 0
                example: 0.9327170663899027
                format: double
            quantity:
                type: integer
                description: 発注数量
                example: 4573920559148457146
                format: int64
            symbol:
                type: string
                description: '銘柄コード (例: 7203)'
                example: Earum perspiciatis et non.
            trade_type:
                type: string
                description: 売買区分 (BUY/SELL)
                example: BUY
                enum:
                    - BUY
                    - SELL
        example:
            order_type: STOP_LIMIT
            position_account_type: MARGIN_NEW
            price: 0.5245594644834467
            quantity: 8565769627440775655
            symbol: Ad quo reiciendis.
            trade_type: SELL
        required:
            - symbol
            - trade_type
            - order_type
            - quantity
    OrderCreateResponseBody:
        title: OrderCreateResponseBody
        type: object
        properties:
            order_id:
                type: string
                description: 受付済み注文ID
                example: Aut commodi sunt nobis maiores veritatis.
        description: ID of the created order
        example:
            order_id: Qui molestiae.
        required:
            - order_id
    PositionResult:
        title: PositionResult
        type: object
        properties:
            average_cost:
                type: number
                description: 平均取得単価
                example: 0.0938438523947144
                format: double
            current_price:
                type: number
                description: 現在値
                example: 0.18808688832224404
                format: double
            opened_date:
                type: string
                description: 建日 (信用取引の場合 YYYYMMDD)
                example: Sed non doloremque rerum et a.
            position_type:
                type: string
                description: ポジション種別 (CASH, MARGIN_LONG, MARGIN_SHORT)
                example: MARGIN_LONG
                enum:
                    - CASH
                    - MARGIN_LONG
                    - MARGIN_SHORT
            quantity:
                type: number
                description: 保有数量
                example: 0.7695677689799679
                format: double
            symbol:
                type: string
                description: 銘柄コード
                example: Molestiae necessitatibus similique.
            unrealized_pl:
                type: number
                description: 評価損益
                example: 0.7846737259311464
                format: double
            unrealized_pl_rate:
                type: number
                description: 評価損益率(%)
                example: 0.07357166255236289
                format: double
        description: A single trading position.
        example:
            average_cost: 0.4630112001114607
            current_price: 0.6088633717075856
            opened_date: Non deserunt accusamus.
            position_type: MARGIN_LONG
            quantity: 0.050314565303262705
            symbol: Eum ut rerum odit.
            unrealized_pl: 0.419813897915644
            unrealized_pl_rate: 0.9693101877270411
        required:
            - symbol
            - position_type
            - quantity
            - average_cost
    StockbotBalance:
        title: 'Mediatype identifier: application/vnd.stockbot.balance; view=default'
        type: object
        properties:
            available_cash_for_stock:
                type: number
                description: 現物株式買付可能額
                example: 0.6448335870324777
                format: double
            available_margin_for_new_position:
                type: number
                description: 信用新規建可能額
                example: 0.569319749963778
                format: double
            has_margin_call:
                type: boolean
                description: 追証発生フラグ (1:発生, 0:未発生)
                example: true
            margin_maintenance_rate:
                type: number
                description: 委託保証金率(%)
                example: 0.22702428083300694
                format: double
            withdrawable_cash:
                type: number
                description: 出金可能額
                example: 0.8582288894478253
                format: double
        description: GetResponseBody result type (default view)
        example:
            available_cash_for_stock: 0.8378008101437636
            available_margin_for_new_position: 0.3576566765329566
            has_margin_call: false
            margin_maintenance_rate: 0.3720840605728348
            withdrawable_cash: 0.14343996577975376
        required:
            - available_cash_for_stock
            - available_margin_for_new_position
            - margin_maintenance_rate
            - withdrawable_cash
            - has_margin_call
    StockbotHistoricalPrice:
        title: 'Mediatype identifier: application/vnd.stockbot.historical-price; view=default'
        type: object
        properties:
            history:
                type: array
                items:
                    $ref: '#/definitions/HistoricalPriceItem'
                description: 過去の価格データ
                example:
                    - close: 0.1073288196505743
                      date: Repellat facilis distinctio autem est et.
                      high: 0.80317096896319
                      low: 0.6248269434735788
                      open: 0.35537281973012846
                      volume: 12859328003418479400
                    - close: 0.1073288196505743
                      date: Repellat facilis distinctio autem est et.
                      high: 0.80317096896319
                      low: 0.6248269434735788
                      open: 0.35537281973012846
                      volume: 12859328003418479400
                    - close: 0.1073288196505743
                      date: Repellat facilis distinctio autem est et.
                      high: 0.80317096896319
                      low: 0.6248269434735788
                      open: 0.35537281973012846
                      volume: 12859328003418479400
            symbol:
                type: string
                description: 銘柄コード
                example: Et soluta quia et dolore sunt enim.
        description: get_history_response_body result type (default view)
        example:
            history:
                - close: 0.1073288196505743
                  date: Repellat facilis distinctio autem est et.
                  high: 0.80317096896319
                  low: 0.6248269434735788
                  open: 0.35537281973012846
                  volume: 12859328003418479400
                - close: 0.1073288196505743
                  date: Repellat facilis distinctio autem est et.
                  high: 0.80317096896319
                  low: 0.6248269434735788
                  open: 0.35537281973012846
                  volume: 12859328003418479400
            symbol: Odit quibusdam impedit nemo accusamus sequi commodi.
        required:
            - symbol
            - history
    StockbotPositionCollection:
        title: 'Mediatype identifier: application/vnd.stockbot.position-collection; view=default'
        type: object
        properties:
            positions:
                type: array
                items:
                    $ref: '#/definitions/PositionResult'
                description: 保有ポジションのリスト
                example:
                    - average_cost: 0.19084728109418947
                      current_price: 0.9217474096794114
                      opened_date: Delectus et aut accusamus voluptate nemo.
                      position_type: MARGIN_LONG
                      quantity: 0.7487887991108492
                      symbol: Error distinctio vel.
                      unrealized_pl: 0.8846762227060176
                      unrealized_pl_rate: 0.19608872989821907
                    - average_cost: 0.19084728109418947
                      current_price: 0.9217474096794114
                      opened_date: Delectus et aut accusamus voluptate nemo.
                      position_type: MARGIN_LONG
                      quantity: 0.7487887991108492
                      symbol: Error distinctio vel.
                      unrealized_pl: 0.8846762227060176
                      unrealized_pl_rate: 0.19608872989821907
                    - average_cost: 0.19084728109418947
                      current_price: 0.9217474096794114
                      opened_date: Delectus et aut accusamus voluptate nemo.
                      position_type: MARGIN_LONG
                      quantity: 0.7487887991108492
                      symbol: Error distinctio vel.
                      unrealized_pl: 0.8846762227060176
                      unrealized_pl_rate: 0.19608872989821907
                    - average_cost: 0.19084728109418947
                      current_price: 0.9217474096794114
                      opened_date: Delectus et aut accusamus voluptate nemo.
                      position_type: MARGIN_LONG
                      quantity: 0.7487887991108492
                      symbol: Error distinctio vel.
                      unrealized_pl: 0.8846762227060176
                      unrealized_pl_rate: 0.19608872989821907
        description: ListResponseBody result type (default view)
        example:
            positions:
                - average_cost: 0.19084728109418947
                  current_price: 0.9217474096794114
                  opened_date: Delectus et aut accusamus voluptate nemo.
                  position_type: MARGIN_LONG
                  quantity: 0.7487887991108492
                  symbol: Error distinctio vel.
                  unrealized_pl: 0.8846762227060176
                  unrealized_pl_rate: 0.19608872989821907
                - average_cost: 0.19084728109418947
                  current_price: 0.9217474096794114
                  opened_date: Delectus et aut accusamus voluptate nemo.
                  position_type: MARGIN_LONG
                  quantity: 0.7487887991108492
                  symbol: Error distinctio vel.
                  unrealized_pl: 0.8846762227060176
                  unrealized_pl_rate: 0.19608872989821907
        required:
            - positions
    StockbotPrice:
        title: 'Mediatype identifier: application/vnd.stockbot.price; view=default'
        type: object
        properties:
            price:
                type: number
                description: 現在値
                example: 0.6600111735958817
                format: double
            symbol:
                type: string
                description: 銘柄コード
                example: Repudiandae ut.
            timestamp:
                type: string
                description: 価格取得日時 (RFC3339)
                example: Perspiciatis quis sequi iure et.
        description: GetResponseBody result type (default view)
        example:
            price: 0.04013690622624199
            symbol: Porro minus ex quidem molestiae.
            timestamp: Molestiae officiis voluptatibus.
        required:
            - symbol
            - price
            - timestamp
    StockbotStockMaster:
        title: 'Mediatype identifier: application/vnd.stockbot.stock-master; view=default'
        type: object
        properties:
            industry_code:
                type: string
                description: 業種コード
                example: Doloribus sit aperiam.
            industry_name:
                type: string
                description: 業種コード名
                example: Ex odit.
            market:
                type: string
                description: 優先市場
                example: Aliquam alias ad omnis et fuga sequi.
            name:
                type: string
                description: 銘柄名
                example: Sit id occaecati dolorem asperiores quasi fugiat.
            name_kana:
                type: string
                description: 銘柄名（カナ）
                example: Ipsam et beatae natus repellat.
            symbol:
                type: string
                description: 銘柄コード
                example: Sint tempora modi quo non velit.
        description: get_stock_response_body result type (default view)
        example:
            industry_code: Quia corporis enim laudantium laboriosam non veritatis.
            industry_name: Et aut est voluptas expedita vel officia.
            market: Id delectus saepe velit cum quia.
            name: Aliquid voluptas quas non est.
            name_kana: Consequatur qui vitae numquam dolores officiis.
            symbol: Laborum earum.
        required:
            - symbol
            - name
            - market
