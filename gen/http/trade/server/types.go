// Code generated by goa v3.23.1, DO NOT EDIT.
//
// trade HTTP server types
//
// Command:
// $ goa gen stock-bot/design

package server

import (
	trade "stock-bot/gen/trade"

	goa "goa.design/goa/v3/pkg"
)

// PlaceOrderRequestBody is the type of the "trade" service "place_order"
// endpoint HTTP request body.
type PlaceOrderRequestBody struct {
	// 銘柄コード
	Symbol *string `form:"symbol,omitempty" json:"symbol,omitempty" xml:"symbol,omitempty"`
	// 売買区分
	TradeType *string `form:"trade_type,omitempty" json:"trade_type,omitempty" xml:"trade_type,omitempty"`
	// 注文種別
	OrderType *string `form:"order_type,omitempty" json:"order_type,omitempty" xml:"order_type,omitempty"`
	// 数量
	Quantity *uint `form:"quantity,omitempty" json:"quantity,omitempty" xml:"quantity,omitempty"`
	// 価格 (指値の場合)
	Price *float64 `form:"price,omitempty" json:"price,omitempty" xml:"price,omitempty"`
	// トリガー価格 (逆指値の場合)
	TriggerPrice *float64 `form:"trigger_price,omitempty" json:"trigger_price,omitempty" xml:"trigger_price,omitempty"`
	// 口座区分
	PositionAccountType *string `form:"position_account_type,omitempty" json:"position_account_type,omitempty" xml:"position_account_type,omitempty"`
}

// CorrectOrderRequestBody is the type of the "trade" service "correct_order"
// endpoint HTTP request body.
type CorrectOrderRequestBody struct {
	// 新しい価格
	Price *float64 `form:"price,omitempty" json:"price,omitempty" xml:"price,omitempty"`
	// 新しい数量
	Quantity *uint `form:"quantity,omitempty" json:"quantity,omitempty" xml:"quantity,omitempty"`
}

// GetSessionResponseBody is the type of the "trade" service "get_session"
// endpoint HTTP response body.
type GetSessionResponseBody struct {
	// セッションID
	SessionID string `form:"session_id" json:"session_id" xml:"session_id"`
	// ユーザーID
	UserID string `form:"user_id" json:"user_id" xml:"user_id"`
	// ログイン時刻 (RFC3339)
	LoginTime string `form:"login_time" json:"login_time" xml:"login_time"`
}

// GetPositionsResponseBody is the type of the "trade" service "get_positions"
// endpoint HTTP response body.
type GetPositionsResponseBody struct {
	// 保有ポジションのリスト
	Positions []*TradePositionResultResponseBody `form:"positions" json:"positions" xml:"positions"`
}

// GetOrdersResponseBody is the type of the "trade" service "get_orders"
// endpoint HTTP response body.
type GetOrdersResponseBody struct {
	// 注文のリスト
	Orders []*TradeOrderResultResponseBody `form:"orders" json:"orders" xml:"orders"`
}

// GetBalanceResponseBody is the type of the "trade" service "get_balance"
// endpoint HTTP response body.
type GetBalanceResponseBody struct {
	// 現金残高
	Cash float64 `form:"cash" json:"cash" xml:"cash"`
	// 買付余力
	BuyingPower float64 `form:"buying_power" json:"buying_power" xml:"buying_power"`
}

// GetPriceHistoryResponseBody is the type of the "trade" service
// "get_price_history" endpoint HTTP response body.
type GetPriceHistoryResponseBody struct {
	// 銘柄コード
	Symbol string `form:"symbol" json:"symbol" xml:"symbol"`
	// 価格履歴
	History []*TradePriceHistoryItemResponseBody `form:"history" json:"history" xml:"history"`
}

// PlaceOrderResponseBody is the type of the "trade" service "place_order"
// endpoint HTTP response body.
type PlaceOrderResponseBody struct {
	// 注文ID
	OrderID string `form:"order_id" json:"order_id" xml:"order_id"`
	// 銘柄コード
	Symbol string `form:"symbol" json:"symbol" xml:"symbol"`
	// 売買区分
	TradeType string `form:"trade_type" json:"trade_type" xml:"trade_type"`
	// 注文種別
	OrderType string `form:"order_type" json:"order_type" xml:"order_type"`
	// 数量
	Quantity uint `form:"quantity" json:"quantity" xml:"quantity"`
	// 価格
	Price float64 `form:"price" json:"price" xml:"price"`
	// 注文状態
	OrderStatus string `form:"order_status" json:"order_status" xml:"order_status"`
	// 口座区分
	PositionAccountType *string `form:"position_account_type,omitempty" json:"position_account_type,omitempty" xml:"position_account_type,omitempty"`
}

// CorrectOrderResponseBody is the type of the "trade" service "correct_order"
// endpoint HTTP response body.
type CorrectOrderResponseBody struct {
	// 注文ID
	OrderID string `form:"order_id" json:"order_id" xml:"order_id"`
	// 銘柄コード
	Symbol string `form:"symbol" json:"symbol" xml:"symbol"`
	// 売買区分
	TradeType string `form:"trade_type" json:"trade_type" xml:"trade_type"`
	// 注文種別
	OrderType string `form:"order_type" json:"order_type" xml:"order_type"`
	// 数量
	Quantity uint `form:"quantity" json:"quantity" xml:"quantity"`
	// 価格
	Price float64 `form:"price" json:"price" xml:"price"`
	// 注文状態
	OrderStatus string `form:"order_status" json:"order_status" xml:"order_status"`
	// 口座区分
	PositionAccountType *string `form:"position_account_type,omitempty" json:"position_account_type,omitempty" xml:"position_account_type,omitempty"`
}

// CancelAllOrdersResponseBody is the type of the "trade" service
// "cancel_all_orders" endpoint HTTP response body.
type CancelAllOrdersResponseBody struct {
	// キャンセルされた注文数
	CancelledCount uint `form:"cancelled_count" json:"cancelled_count" xml:"cancelled_count"`
}

// ValidateSymbolResponseBody is the type of the "trade" service
// "validate_symbol" endpoint HTTP response body.
type ValidateSymbolResponseBody struct {
	// 取引可能かどうか
	Valid bool `form:"valid" json:"valid" xml:"valid"`
	// 銘柄コード
	Symbol string `form:"symbol" json:"symbol" xml:"symbol"`
	// 銘柄名
	Name *string `form:"name,omitempty" json:"name,omitempty" xml:"name,omitempty"`
	// 売買単位
	TradingUnit *uint `form:"trading_unit,omitempty" json:"trading_unit,omitempty" xml:"trading_unit,omitempty"`
	// 市場
	Market *string `form:"market,omitempty" json:"market,omitempty" xml:"market,omitempty"`
}

// GetOrderHistoryResponseBody is the type of the "trade" service
// "get_order_history" endpoint HTTP response body.
type GetOrderHistoryResponseBody struct {
	// 注文履歴
	Orders []*TradeOrderHistoryResultResponseBody `form:"orders" json:"orders" xml:"orders"`
}

// HealthCheckResponseBody is the type of the "trade" service "health_check"
// endpoint HTTP response body.
type HealthCheckResponseBody struct {
	// サービス状態
	Status string `form:"status" json:"status" xml:"status"`
	// チェック時刻 (RFC3339)
	Timestamp string `form:"timestamp" json:"timestamp" xml:"timestamp"`
	// セッション有効性
	SessionValid *bool `form:"session_valid,omitempty" json:"session_valid,omitempty" xml:"session_valid,omitempty"`
	// データベース接続状態
	DatabaseConnected *bool `form:"database_connected,omitempty" json:"database_connected,omitempty" xml:"database_connected,omitempty"`
	// WebSocket接続状態
	WebsocketConnected *bool `form:"websocket_connected,omitempty" json:"websocket_connected,omitempty" xml:"websocket_connected,omitempty"`
}

// TradePositionResultResponseBody is used to define fields on response body
// types.
type TradePositionResultResponseBody struct {
	// 銘柄コード
	Symbol string `form:"symbol" json:"symbol" xml:"symbol"`
	// ポジション種別
	PositionType string `form:"position_type" json:"position_type" xml:"position_type"`
	// 口座区分
	PositionAccountType string `form:"position_account_type" json:"position_account_type" xml:"position_account_type"`
	// 平均取得価格
	AveragePrice float64 `form:"average_price" json:"average_price" xml:"average_price"`
	// 数量
	Quantity uint `form:"quantity" json:"quantity" xml:"quantity"`
}

// TradeOrderResultResponseBody is used to define fields on response body types.
type TradeOrderResultResponseBody struct {
	// 注文ID
	OrderID string `form:"order_id" json:"order_id" xml:"order_id"`
	// 銘柄コード
	Symbol string `form:"symbol" json:"symbol" xml:"symbol"`
	// 売買区分
	TradeType string `form:"trade_type" json:"trade_type" xml:"trade_type"`
	// 注文種別
	OrderType string `form:"order_type" json:"order_type" xml:"order_type"`
	// 数量
	Quantity uint `form:"quantity" json:"quantity" xml:"quantity"`
	// 価格
	Price float64 `form:"price" json:"price" xml:"price"`
	// 注文状態
	OrderStatus string `form:"order_status" json:"order_status" xml:"order_status"`
	// 口座区分
	PositionAccountType *string `form:"position_account_type,omitempty" json:"position_account_type,omitempty" xml:"position_account_type,omitempty"`
}

// TradePriceHistoryItemResponseBody is used to define fields on response body
// types.
type TradePriceHistoryItemResponseBody struct {
	// 日付 (RFC3339)
	Date string `form:"date" json:"date" xml:"date"`
	// 始値
	Open float64 `form:"open" json:"open" xml:"open"`
	// 高値
	High float64 `form:"high" json:"high" xml:"high"`
	// 安値
	Low float64 `form:"low" json:"low" xml:"low"`
	// 終値
	Close float64 `form:"close" json:"close" xml:"close"`
	// 出来高
	Volume uint64 `form:"volume" json:"volume" xml:"volume"`
}

// TradeOrderHistoryResultResponseBody is used to define fields on response
// body types.
type TradeOrderHistoryResultResponseBody struct {
	// 注文ID
	OrderID string `form:"order_id" json:"order_id" xml:"order_id"`
	// 銘柄コード
	Symbol string `form:"symbol" json:"symbol" xml:"symbol"`
	// 売買区分
	TradeType string `form:"trade_type" json:"trade_type" xml:"trade_type"`
	// 注文種別
	OrderType string `form:"order_type" json:"order_type" xml:"order_type"`
	// 数量
	Quantity uint `form:"quantity" json:"quantity" xml:"quantity"`
	// 価格
	Price float64 `form:"price" json:"price" xml:"price"`
	// 注文状態
	OrderStatus string `form:"order_status" json:"order_status" xml:"order_status"`
	// 口座区分
	PositionAccountType *string `form:"position_account_type,omitempty" json:"position_account_type,omitempty" xml:"position_account_type,omitempty"`
	// 注文日時 (RFC3339)
	CreatedAt string `form:"created_at" json:"created_at" xml:"created_at"`
	// 更新日時 (RFC3339)
	UpdatedAt *string `form:"updated_at,omitempty" json:"updated_at,omitempty" xml:"updated_at,omitempty"`
	// 約定履歴
	Executions []*TradeExecutionResultResponseBody `form:"executions,omitempty" json:"executions,omitempty" xml:"executions,omitempty"`
}

// TradeExecutionResultResponseBody is used to define fields on response body
// types.
type TradeExecutionResultResponseBody struct {
	// 約定ID
	ExecutionID string `form:"execution_id" json:"execution_id" xml:"execution_id"`
	// 約定数量
	ExecutedQuantity uint `form:"executed_quantity" json:"executed_quantity" xml:"executed_quantity"`
	// 約定価格
	ExecutedPrice float64 `form:"executed_price" json:"executed_price" xml:"executed_price"`
	// 約定日時 (RFC3339)
	ExecutedAt string `form:"executed_at" json:"executed_at" xml:"executed_at"`
}

// NewGetSessionResponseBody builds the HTTP response body from the result of
// the "get_session" endpoint of the "trade" service.
func NewGetSessionResponseBody(res *trade.GetSessionResult) *GetSessionResponseBody {
	body := &GetSessionResponseBody{
		SessionID: res.SessionID,
		UserID:    res.UserID,
		LoginTime: res.LoginTime,
	}
	return body
}

// NewGetPositionsResponseBody builds the HTTP response body from the result of
// the "get_positions" endpoint of the "trade" service.
func NewGetPositionsResponseBody(res *trade.GetPositionsResult) *GetPositionsResponseBody {
	body := &GetPositionsResponseBody{}
	if res.Positions != nil {
		body.Positions = make([]*TradePositionResultResponseBody, len(res.Positions))
		for i, val := range res.Positions {
			if val == nil {
				body.Positions[i] = nil
				continue
			}
			body.Positions[i] = marshalTradeTradePositionResultToTradePositionResultResponseBody(val)
		}
	} else {
		body.Positions = []*TradePositionResultResponseBody{}
	}
	return body
}

// NewGetOrdersResponseBody builds the HTTP response body from the result of
// the "get_orders" endpoint of the "trade" service.
func NewGetOrdersResponseBody(res *trade.GetOrdersResult) *GetOrdersResponseBody {
	body := &GetOrdersResponseBody{}
	if res.Orders != nil {
		body.Orders = make([]*TradeOrderResultResponseBody, len(res.Orders))
		for i, val := range res.Orders {
			if val == nil {
				body.Orders[i] = nil
				continue
			}
			body.Orders[i] = marshalTradeTradeOrderResultToTradeOrderResultResponseBody(val)
		}
	} else {
		body.Orders = []*TradeOrderResultResponseBody{}
	}
	return body
}

// NewGetBalanceResponseBody builds the HTTP response body from the result of
// the "get_balance" endpoint of the "trade" service.
func NewGetBalanceResponseBody(res *trade.TradeBalanceResult) *GetBalanceResponseBody {
	body := &GetBalanceResponseBody{
		Cash:        res.Cash,
		BuyingPower: res.BuyingPower,
	}
	return body
}

// NewGetPriceHistoryResponseBody builds the HTTP response body from the result
// of the "get_price_history" endpoint of the "trade" service.
func NewGetPriceHistoryResponseBody(res *trade.GetPriceHistoryResult) *GetPriceHistoryResponseBody {
	body := &GetPriceHistoryResponseBody{
		Symbol: res.Symbol,
	}
	if res.History != nil {
		body.History = make([]*TradePriceHistoryItemResponseBody, len(res.History))
		for i, val := range res.History {
			if val == nil {
				body.History[i] = nil
				continue
			}
			body.History[i] = marshalTradeTradePriceHistoryItemToTradePriceHistoryItemResponseBody(val)
		}
	} else {
		body.History = []*TradePriceHistoryItemResponseBody{}
	}
	return body
}

// NewPlaceOrderResponseBody builds the HTTP response body from the result of
// the "place_order" endpoint of the "trade" service.
func NewPlaceOrderResponseBody(res *trade.TradeOrderResult) *PlaceOrderResponseBody {
	body := &PlaceOrderResponseBody{
		OrderID:             res.OrderID,
		Symbol:              res.Symbol,
		TradeType:           res.TradeType,
		OrderType:           res.OrderType,
		Quantity:            res.Quantity,
		Price:               res.Price,
		OrderStatus:         res.OrderStatus,
		PositionAccountType: res.PositionAccountType,
	}
	return body
}

// NewCorrectOrderResponseBody builds the HTTP response body from the result of
// the "correct_order" endpoint of the "trade" service.
func NewCorrectOrderResponseBody(res *trade.TradeOrderResult) *CorrectOrderResponseBody {
	body := &CorrectOrderResponseBody{
		OrderID:             res.OrderID,
		Symbol:              res.Symbol,
		TradeType:           res.TradeType,
		OrderType:           res.OrderType,
		Quantity:            res.Quantity,
		Price:               res.Price,
		OrderStatus:         res.OrderStatus,
		PositionAccountType: res.PositionAccountType,
	}
	return body
}

// NewCancelAllOrdersResponseBody builds the HTTP response body from the result
// of the "cancel_all_orders" endpoint of the "trade" service.
func NewCancelAllOrdersResponseBody(res *trade.CancelAllOrdersResult) *CancelAllOrdersResponseBody {
	body := &CancelAllOrdersResponseBody{
		CancelledCount: res.CancelledCount,
	}
	return body
}

// NewValidateSymbolResponseBody builds the HTTP response body from the result
// of the "validate_symbol" endpoint of the "trade" service.
func NewValidateSymbolResponseBody(res *trade.ValidateSymbolResult) *ValidateSymbolResponseBody {
	body := &ValidateSymbolResponseBody{
		Valid:       res.Valid,
		Symbol:      res.Symbol,
		Name:        res.Name,
		TradingUnit: res.TradingUnit,
		Market:      res.Market,
	}
	return body
}

// NewGetOrderHistoryResponseBody builds the HTTP response body from the result
// of the "get_order_history" endpoint of the "trade" service.
func NewGetOrderHistoryResponseBody(res *trade.GetOrderHistoryResult) *GetOrderHistoryResponseBody {
	body := &GetOrderHistoryResponseBody{}
	if res.Orders != nil {
		body.Orders = make([]*TradeOrderHistoryResultResponseBody, len(res.Orders))
		for i, val := range res.Orders {
			if val == nil {
				body.Orders[i] = nil
				continue
			}
			body.Orders[i] = marshalTradeTradeOrderHistoryResultToTradeOrderHistoryResultResponseBody(val)
		}
	} else {
		body.Orders = []*TradeOrderHistoryResultResponseBody{}
	}
	return body
}

// NewHealthCheckResponseBody builds the HTTP response body from the result of
// the "health_check" endpoint of the "trade" service.
func NewHealthCheckResponseBody(res *trade.HealthCheckResult) *HealthCheckResponseBody {
	body := &HealthCheckResponseBody{
		Status:             res.Status,
		Timestamp:          res.Timestamp,
		SessionValid:       res.SessionValid,
		DatabaseConnected:  res.DatabaseConnected,
		WebsocketConnected: res.WebsocketConnected,
	}
	return body
}

// NewGetPriceHistoryPayload builds a trade service get_price_history endpoint
// payload.
func NewGetPriceHistoryPayload(symbol string, days uint) *trade.GetPriceHistoryPayload {
	v := &trade.GetPriceHistoryPayload{}
	v.Symbol = symbol
	v.Days = days

	return v
}

// NewPlaceOrderPayload builds a trade service place_order endpoint payload.
func NewPlaceOrderPayload(body *PlaceOrderRequestBody) *trade.PlaceOrderPayload {
	v := &trade.PlaceOrderPayload{
		Symbol:    *body.Symbol,
		TradeType: *body.TradeType,
		OrderType: *body.OrderType,
		Quantity:  *body.Quantity,
	}
	if body.Price != nil {
		v.Price = *body.Price
	}
	if body.TriggerPrice != nil {
		v.TriggerPrice = *body.TriggerPrice
	}
	if body.PositionAccountType != nil {
		v.PositionAccountType = *body.PositionAccountType
	}
	if body.Price == nil {
		v.Price = 0
	}
	if body.TriggerPrice == nil {
		v.TriggerPrice = 0
	}
	if body.PositionAccountType == nil {
		v.PositionAccountType = "CASH"
	}

	return v
}

// NewCancelOrderPayload builds a trade service cancel_order endpoint payload.
func NewCancelOrderPayload(orderID string) *trade.CancelOrderPayload {
	v := &trade.CancelOrderPayload{}
	v.OrderID = orderID

	return v
}

// NewCorrectOrderPayload builds a trade service correct_order endpoint payload.
func NewCorrectOrderPayload(body *CorrectOrderRequestBody, orderID string) *trade.CorrectOrderPayload {
	v := &trade.CorrectOrderPayload{
		Price:    body.Price,
		Quantity: body.Quantity,
	}
	v.OrderID = orderID

	return v
}

// NewValidateSymbolPayload builds a trade service validate_symbol endpoint
// payload.
func NewValidateSymbolPayload(symbol string) *trade.ValidateSymbolPayload {
	v := &trade.ValidateSymbolPayload{}
	v.Symbol = symbol

	return v
}

// NewGetOrderHistoryPayload builds a trade service get_order_history endpoint
// payload.
func NewGetOrderHistoryPayload(status *string, symbol *string, limit uint) *trade.GetOrderHistoryPayload {
	v := &trade.GetOrderHistoryPayload{}
	v.Status = status
	v.Symbol = symbol
	v.Limit = limit

	return v
}

// ValidatePlaceOrderRequestBody runs the validations defined on
// place_order_request_body
func ValidatePlaceOrderRequestBody(body *PlaceOrderRequestBody) (err error) {
	if body.Symbol == nil {
		err = goa.MergeErrors(err, goa.MissingFieldError("symbol", "body"))
	}
	if body.TradeType == nil {
		err = goa.MergeErrors(err, goa.MissingFieldError("trade_type", "body"))
	}
	if body.OrderType == nil {
		err = goa.MergeErrors(err, goa.MissingFieldError("order_type", "body"))
	}
	if body.Quantity == nil {
		err = goa.MergeErrors(err, goa.MissingFieldError("quantity", "body"))
	}
	if body.TradeType != nil {
		if !(*body.TradeType == "BUY" || *body.TradeType == "SELL") {
			err = goa.MergeErrors(err, goa.InvalidEnumValueError("body.trade_type", *body.TradeType, []any{"BUY", "SELL"}))
		}
	}
	if body.OrderType != nil {
		if !(*body.OrderType == "MARKET" || *body.OrderType == "LIMIT" || *body.OrderType == "STOP") {
			err = goa.MergeErrors(err, goa.InvalidEnumValueError("body.order_type", *body.OrderType, []any{"MARKET", "LIMIT", "STOP"}))
		}
	}
	if body.PositionAccountType != nil {
		if !(*body.PositionAccountType == "CASH" || *body.PositionAccountType == "MARGIN_NEW" || *body.PositionAccountType == "MARGIN_REPAY") {
			err = goa.MergeErrors(err, goa.InvalidEnumValueError("body.position_account_type", *body.PositionAccountType, []any{"CASH", "MARGIN_NEW", "MARGIN_REPAY"}))
		}
	}
	return
}
