// Code generated by goa v3.23.1, DO NOT EDIT.
//
// price service
//
// Command:
// $ goa gen stock-bot/design

package price

import (
	"context"
	priceviews "stock-bot/gen/price/views"
)

// The price service provides current stock price information.
type Service interface {
	// Get the current price for a specified stock symbol.
	Get(context.Context, *GetPayload) (res *StockbotPrice, err error)
}

// APIName is the name of the API as defined in the design.
const APIName = "stockbot"

// APIVersion is the version of the API as defined in the design.
const APIVersion = "0.0.1"

// ServiceName is the name of the service as defined in the design. This is the
// same value that is set in the endpoint request contexts under the ServiceKey
// key.
const ServiceName = "price"

// MethodNames lists the service method names as defined in the design. These
// are the same values that are set in the endpoint request contexts under the
// MethodKey key.
var MethodNames = [1]string{"get"}

// GetPayload is the payload type of the price service get method.
type GetPayload struct {
	// Stock symbol to look up
	Symbol string
}

// StockbotPrice is the result type of the price service get method.
type StockbotPrice struct {
	// 銘柄コード
	Symbol string
	// 現在値
	Price float64
	// 価格取得日時 (RFC3339)
	Timestamp string
}

// NewStockbotPrice initializes result type StockbotPrice from viewed result
// type StockbotPrice.
func NewStockbotPrice(vres *priceviews.StockbotPrice) *StockbotPrice {
	return newStockbotPrice(vres.Projected)
}

// NewViewedStockbotPrice initializes viewed result type StockbotPrice from
// result type StockbotPrice using the given view.
func NewViewedStockbotPrice(res *StockbotPrice, view string) *priceviews.StockbotPrice {
	p := newStockbotPriceView(res)
	return &priceviews.StockbotPrice{Projected: p, View: "default"}
}

// newStockbotPrice converts projected type StockbotPrice to service type
// StockbotPrice.
func newStockbotPrice(vres *priceviews.StockbotPriceView) *StockbotPrice {
	res := &StockbotPrice{}
	if vres.Symbol != nil {
		res.Symbol = *vres.Symbol
	}
	if vres.Price != nil {
		res.Price = *vres.Price
	}
	if vres.Timestamp != nil {
		res.Timestamp = *vres.Timestamp
	}
	return res
}

// newStockbotPriceView projects result type StockbotPrice to projected type
// StockbotPriceView using the "default" view.
func newStockbotPriceView(res *StockbotPrice) *priceviews.StockbotPriceView {
	vres := &priceviews.StockbotPriceView{
		Symbol:    &res.Symbol,
		Price:     &res.Price,
		Timestamp: &res.Timestamp,
	}
	return vres
}
